@model CzechLearning.Models.WordQuiz
@using CzechLearning;

@{
    ViewBag.Title = "Quiz!";
}
<script src="~/Scripts/jquery-1.7.1.min.js"></script>
<!--script src="~/Scripts/jquery.validate.min.js"></!--script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script-->
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
<script src="~/Scripts/jquery.hotkeys.js"></script>
<script>
    // Bind space to 'next' action
    $(document).bind('keydown', 'space', getNext);

    function getNext(evt) {
        evt.preventDefault();
        // We reload the page, knowing that we'll get a new word
        location.reload();
        return false;
    }
</script>
<script>
    // Hint binding

    $(function () {
        // Hook the btnHint get JSON data for Hint
        $('#btnHint').click(function (event) {
            event.preventDefault();
            // Get the form
            var form = $('form');

            $.getJSON("@Url.Action("Hint")", form.serialize(), function (data) {
                
                // Update relevant form fields
                $("#userTranslation").val(data.userTranslation);
                $("#hintLevel").val(data.hintLevel);
            });
        });
    }
)
</script>

<h2>Word quiz</h2>


@using (Ajax.BeginForm("CheckWord",
    Model,
    new AjaxOptions
    {
        UpdateTargetId = "resultplaceholder",
        InsertionMode = InsertionMode.Replace,
        HttpMethod = "POST",
    }, new { autocomplete = "off" }))
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Word quiz</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.English)
        </div>
        <div class="editor-field">
            @Html.DisplayFor(model => model.English)
            @Html.HiddenFor(model => model.English)
        </div>
        <div class="editor-field">
            @Html.HiddenFor(model => model.Czech)
        </div>
         <div class="editor-field">
            @Html.HiddenFor(model => model.hintLevel)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.userTranslation)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.userTranslation)
            @Html.ValidationMessageFor(model => model.userTranslation)
            <span id="resultplaceholder"></span>
        </div>
        @{
            var dict = new ViewDataDictionary();
            dict.Add("id", "userTranslation");
        }
        @Html.Partial("CzechKeys",dict)
        <p>
            <input type="submit" name="CheckWord" value="Test"/>
            <button id="btnHint" name="Hint" value="Hint">Hint</button>
            <button onclick ="location.href='@Url.Action("Index")'">Next >></button>
        </p>
    </fieldset>
}


